# PopPump - 产品需求文档 (PRD)

**文档版本**：v2.0
**创建日期**：2026-02-06
**最后更新**：2026-02-08
**产品经理**：夏树
**文档状态**：设计阶段

---

## 📋 更新日志

- **v2.0** (2026-02-08)：重大架构调整 + 品牌确立
  - 产品名称：**PopPump**（爆款文章的内容工厂）
  - 从6步流程工具 → 三栏式AI创作Agent
  - 新增知识库管理（框架库、风格库、参考文章、生成文章）
  - 新增多标签画布系统
  - 新增Agent对话式交互
  - 核心理念：主动理解、透明展示、可控生成

- **v1.0** (2026-02-06)：初始版本，确定核心功能和6步流程

---

## 1. 产品概述

### 1.1 产品定位
**PopPump - 小红书爆款笔记写作Agent**

一个专为小红书创作者打造的爆款笔记生产Agent，通过对话式交互学习用户的写作风格，主动理解创作意图，实时展示思考过程，源源不断地生产符合个人特色的爆款笔记内容。

**名字寓意**：
- **Pop** = 爆款、流行、受欢迎（小红书核心指标）
- **Pump** = 泵、源源不断（批量生产能力）
- **PopPump** = 爆款泵，小红书专属的内容工厂

**Slogan**：小红书爆款笔记写作Agent

**与工具的区别**：
- ❌ **工具**：用户需要自己填表单、选选项、点按钮
- ✅ **PopPump Agent**：用户说目标，Agent理解并自主完成，过程透明可控

**品牌个性**：
- 主动：像内容工厂一样主动工作
- 高效：批量生产，源源不断
- 爆款：追求高点赞、高转化

### 1.2 核心价值
- **降低创作门槛**：新手只需说出想法，PopPump自动完成
- **提升创作效率**：有经验的博主快速生成，风格复用
- **保持风格一致性**：学习并记住个人风格，生成内容高度一致
- **资产管理**：所有创作资产集中管理，随时查看复用
- **爆款导向**：优化标题和内容，追求更高的点赞转化率

### 1.3 目标用户
- **新手创作者**：有想法但不会写，需要PopPump辅助完成
- **经验博主**：已有一定粉丝基础，需要提高产出效率，管理多风格

### 1.4 品牌个性
- **主动作为**：像工厂一样主动工作，不需要你一步步操作
- **批量生产**：源源不断地生产内容，高效产出
- **爆款导向**：优化标题和内容，追求高点赞、高转化
- **风格一致**：记住你的写作风格，保持个人特色

---

## 2. 产品架构

### 2.1 整体布局（三栏式）

```
┌────────────────────────────────────────────────────────────────────┐
│  Header: [Logo] PopPump - 爆款内容工厂    [用户头像] [设置] [帮助]   │
├──────────────┬──────────────────────────────────┬─────────────────┤
│              │                                  │                 │
│  左侧目录    │       中间画布                   │   右侧对话框    │
│  (知识库)    │       (多标签页)                 │   (Agent交互)   │
│              │                                  │                 │
│ 📁 框架库    │ [+ 新建标签]                    │ Agent 对话记录 │
│ 📁 风格库    │ ┌──────────────────────────────┐ │                 │
│ 📁 参考文章  │ │ 文章1 [编辑中]         ×     │ │ 消息区域       │
│ 📁 生成文章  │ ├──────────────────────────────┤ │                 │
│              │ │ 风格#1 [只读]          ×     │ │ Agent: ...     │
│ [搜索框]     │ └──────────────────────────────┘ │ User: ...      │
│              │                                  │                 │
└──────────────┴──────────────────────────────────┴─────────────────┘
```

### 2.2 核心理念

**1. 主动性（Proactive）**
- Agent主动检测：是否有历史风格、用户的意图是什么
- Agent主动建议：推荐框架、推荐标题
- Agent主动展示：实时透明展示思考过程

**2. 透明性（Transparency）**
- 不是"黑盒"，而是展示：
  - 学到了什么风格
  - 选择了什么框架
  - 正在生成什么内容
  - 为什么这样选择

**3. 可控性（Controllability）**
- 用户可以随时：
  - 暂停/继续生成
  - 调整框架/风格
  - 编辑生成结果
  - 重新生成

**4. 记忆力（Memory）**
- 记住用户的风格
- 记住用户的偏好
- 记住创作历史
- 用户可以管理这些记忆

---

## 3. 核心功能

### 3.1 左侧目录 - 知识库管理

#### 功能描述
集中管理所有创作资产，包括框架库、风格库、参考文章、生成文章。

#### 文件夹结构

**📁 框架库**（自动提取 + 用户管理）
- **写入机制**：用户上传参考文章后，系统自动提取框架并写入框架库
- **内容**：保存每种框架类型的定义、结构、适用场景
- **功能**：点击查看框架详情，点击"使用此框架"应用到创作

**📁 风格库**（自动提取 + 用户管理）
- **写入机制**：用户上传参考文章后，系统自动提取并写入风格库
- **内容**：用户文风指南，保存常用表达、句式、金句、语气特点、表情使用习惯
- **功能**：支持多个风格（如：轻松风格 vs 正式风格），右键菜单：编辑、删除、设为默认

**📁 参考文章**（用户上传，可管理）
- **写入机制**：用户上传参考文章后自动保存
- **内容**：保存用于学习风格的原始文章
- **功能**：支持查看、删除，显示使用次数

**📁 生成文章**（系统生成 + 用户确认保存）
- **写入机制**：系统写作后，用户手动点击保存，或者系统询问用户是否保存、用户确认后保存
- **内容**：保存所有生成的笔记
- **功能**：支持继续编辑、复制、导出，自动保存草稿

#### 交互规则

**点击文件夹**：
- 展开/折叠子项
- 箭头图标旋转（▶ / ▼）

**点击资产项**：
- 在中间画布打开新标签
- 如果已打开，切换到该标签
- 高亮当前选中项

**右键菜单**：
- 框架库：查看详情
- 风格库：编辑、删除、重命名、设为默认
- 参考文章：查看、删除、重命名
- 生成文章：编辑、删除、重命名、复制、导出

**特殊功能**：
- 搜索框：实时过滤所有资产
- 拖拽排序：同级资产可拖拽排序

#### 知识库详细说明

**参考文章分类**：
- 按**框架类型**分类存放
- 每个分类下：用户爆款 + 别人爆款

**框架库与文风库的区别**：

**核心原则**：按**框架差异**和**语料差异**进行分类

- **框架差异**：文章结构、逻辑链条、段落功能的不同
- **语料差异**：表达方式、语气风格、内容类型的不同

**框架库**：
- 可复用框架库
- 每种框架类型的定义、结构、适用场景

**文风库**：
- 常用表达、句式、金句、语气特点、表情使用习惯
- 包含祝福型笔记写作技巧、接好运引导型结尾技巧
- 包含案例对比分析（AI vs 人工优化）

**分类规则**：

##### 如何判断框架类型

**Step 1: 分析文章结构**
- **开头**：用了什么手法？（提问/故事/数据/观点...）
- **主体**：有几个要点？怎么展开的？（并列/递进/对比...）
- **结尾**：怎么收尾？（总结/呼吁/提问...）

**Step 2: 提取逻辑链条**
- 核心逻辑是什么？
- 论证方式是什么？
- 递进设计是什么？

**Step 3: 对照分类标准**
- 根据框架库中的框架类型定义，找到最匹配的类型

**Step 4: 如果无法归类**
- 可能是新的框架类型
- 在框架库中添加新类型

##### 语料差异判断

**说明**：以下3个维度仅为举例，不是指仅有这3个维度

**维度1：内容类型**
- 干货分享类
- 故事叙述类
- 观点输出类
- 方法教学类
- 清单总结类

**维度2：语气风格**
- 专业严肃
- 轻松幽默
- 亲切友好
- 犀利直接
- 温柔治愈

**维度3：表达方式**
- 口语化
- 书面化
- 混合型

##### 分类决策流程

```
新文章
  ↓
分析框架结构
  ↓
对照现有类型
  ↓
匹配成功？→ 放入对应文件夹
  ↓ 否
判断是否为新类型 → 是 → 添加新类型定义
  ↓ 否
选择最接近的类型 → 放入该文件夹，并在备注中说明
```

##### 分类示例

**示例1：问题-解决型文章**

**文章内容**：开头提出职场新人常遇到的沟通问题 → 分析原因 → 给出3个解决方法 → 总结

**分类过程**：
1. 结构：问题 → 原因 → 方法 → 总结
2. 逻辑：提出问题-分析问题-解决问题
3. 对照标准：匹配"问题-解决型"
4. 分类：`问题-解决型/`文件夹

**示例2：清单总结型文章**

**文章内容**：直接列出"产品经理必备的5个技能"，每个技能简短说明

**分类过程**：
1. 结构：标题 + 5个要点并列
2. 逻辑：并列关系，无递进
3. 对照标准：匹配"清单总结型"
4. 分类：`清单总结型/`文件夹

##### 框架模板

**每个框架包含**：
- **框架名称**
- **适用场景**：适合写什么类型的笔记
- **结构图**：可视化展示框架结构
- **关键技巧**：使用此框架的注意事项

**添加方法**：
1. 分析参考文章的写作框架
2. 提取可复用的结构模式
3. 按照以下模板添加到框架库

**框架模板格式**：

```markdown
### 框架名称：[名称]

**适用场景**：[适合什么类型的笔记]

**结构**：
```
标题：[标题结构公式]
├── 开头：[开头手法]
├── 主体：
│   ├── 要点1：[如何展开]
│   ├── 要点2：[如何展开]
│   └── 要点3：[如何展开]
└── 结尾：[结尾手法]
```

**关键技巧**：
- 技巧1：[具体说明]
- 技巧2：[具体说明]
- 技巧3：[具体说明]

**示例文章**：[参考文章编号]
```

**框架分类索引**：

[按框架类型列出所有框架，方便快速查找]

**框架库维护说明**：

- 每添加一个新的参考文章，检查是否需要更新框架库
- 定期检查框架的适用性，删除过时框架
- 保持框架的清晰性和可操作性
- 框架名称要直观易懂，方便用户快速识别

**文风库说明**：

**文风库定义**：从小红书爆款笔记中提取用户的文风特征，用于生成内容时保持一致的个人风格

**每类文风包含**：

**1. 基础特征**：
- **语气特点**：亲切/严肃/幽默/犀利/温柔/专业等
- **句式习惯**：短句/长句/问答式/排比句/倒装句等
- **表达偏好**：口语化/书面化/混合型

**2. 金句库**：
- **定义**：用户文章中富有感染力、易传播的句子
- **类型**：
  - 观点型金句（表达核心观点）
  - 情感型金句（激发共鸣）
  - 行动型金句（引导行动）
  - 总结型金句（概括全文）
- **记录方式**：提取原文 + 标注使用场景
- **示例**：
  ```
  "效率不是做得更多，而是做得更对！" [总结型，适合结尾]
  "很多人觉得勤奋就能成功，但其实..." [观点型，适合开头]
  ```

**3. 常用表达库**：
- **开场白**：常用的文章引入方式
  - 例："今天和大家分享..."
  - 例："最近我发现..."
  - 例："很多人问我..."
- **过渡句**：段落之间的连接词
  - 例："首先...其次...最后..."
  - 例："不仅如此..."
  - 例："更重要的是..."
- **提醒词**：引起注意的表达
  - 例："记住..."
  - 例："建议..."
  - 例："一定要..."
- **行动引导**：结尾的行动建议
  - 例："从今天开始..."
  - 例："试试看..."
  - 例："你准备好了吗？"

**4. 标点与表情使用**：
- **标点符号习惯**：
  - 句号使用频率（多用句号 vs 多用感叹号）
  - 省略号使用（表示停顿/悬念）
  - 问号使用（反问/设问频率）
  - 特殊标点（破折号/括号/引号的使用偏好）
- **表情符号（Emoji）使用**：
  - 使用频率：高频/中频/低频/不用
  - 常用表情：🌟 💡 ✅ 📝 🔥等
  - 使用位置：
    - 开头表情（吸引注意）
    - 段落表情（分隔/装饰）
    - 结尾表情（强化情绪）
  - 功能分类：
    - 装饰型：美化排版
    - 强调型：突出重点
    - 分隔型：区分段落
    - 情绪型：传递情感

**5. 特殊用语库**：
- **专业术语**：特定领域的专业词汇
  - 例：产品经理常用"PRD"、"MVP"、"用户需求"
- **网络用语**：网络流行语的使用
  - 例："yyds"、"绝绝子"、"破防了"
- **自创词汇**：用户创造或偏好的特殊表达
  - 例：特定的词语组合/独特的说法
- **口头禅**：高频出现的词语或短语
  - 例："其实"、"说实话"、"我觉得"
- **英文/数字混用**：中英文混用习惯
  - 例："AI"、"PM"、"KPI"、"3个技巧"

**文风库维护说明**：

- 从每篇新的参考文章中提取独特的表达和金句
- 定期整理和分类，避免重复
- 保持独特性，每个风格标签应该有明显的区分度
- 根据实际创作经验，持续更新本章节
- 支持多个风格（如：轻松风格 vs 正式风格）

**使用指南**：
- 知识库的说明
- 如何添加新文章



### 3.2 中间画布 - 多标签页系统

#### 功能描述
支持同时打开多个标签，查看和编辑不同资产，类似IDE的多标签页体验。

#### 标签页类型

**类型1：文章编辑**
- 标题选择区（3个推荐标题）
- 正文编辑区（可编辑textarea）
- 标签管理区（添加/删除标签）
- 保存按钮、复制按钮
- 状态标识：[编辑中]、[已保存]

**类型2：风格详情**
- 风格特征展示（4个维度）
- 使用次数统计
- 操作按钮：应用此风格、编辑、删除
- 状态标识：[只读]

**类型3：框架说明**
- 框架介绍和适用场景
- 结构特点说明
- 示例文章展示
- 操作按钮：使用此框架、查看更多示例
- 状态标识：[只读]

**类型4：参考文章**
- 文章内容展示
- 来源信息、上传时间、使用次数
- 操作按钮：再次学习此风格、删除
- 状态标识：[只读]

#### 标签页操作

**标签栏**：
- 点击切换标签
- × 关闭标签
- 拖拽排序（可选）
- 标签右键：关闭其他、关闭所有、固定标签

**标签状态指示**：
- `[编辑中]` - 文章标签，有未保存修改
- `[只读]` - 只读标签
- `[已修改]` - 风格库资产，已修改未保存

**限制**：
- 最多打开10个标签（超过时提示）
- 同一资产只能打开一个标签
- 关闭标签时提示保存（仅编辑中状态）

---

### 3.3 右侧对话框 - Agent交互

#### 功能描述
通过对话式交互，Agent主动理解用户意图，展示思考过程，引导完成创作。

#### 界面结构

**消息区域**（可滚动）：
- Agent消息：文字、进度条、操作按钮
- User消息：用户输入
- 自动滚动到最新消息

**输入框**（多行）：
- 支持长文本输入
- Enter发送（Shift+Enter换行）
- 支持粘贴参考文章

**快捷操作按钮**：
- [生成笔记] - 快速开始创作
- [学习风格] - 上传参考文章学习新风格
- [管理资产] - 查看和管理所有资产

#### Agent消息类型

**类型1：纯文本**
```
Agent: 好的，正在为你生成笔记...
```

**类型2：带按钮的操作建议**
```
Agent: 检测到你有2个风格：
• 风格#1（轻松活泼型）
• 风格#2（专业严谨型）

使用哪个风格开始生成？
[使用风格#1] [使用风格#2] [新建风格]
```

**类型3：进度展示**
```
Agent: 正在分析你的写作风格...
┌─────────────────────────┐
│ ✓ 理解意图              │
│ → 提取写作框架...       │ 30%
│ ○ 学习语言风格          │
│ ○ 识别结构特征          │
└─────────────────────────┘
```

**类型4：完成确认**
```
Agent: ✅ 笔记已生成！
已自动打开「文章1」标签，你可以：
- 选择标题（3个推荐）
- 编辑正文内容
- 调整标签

满意后告诉我，我会保存到「生成文章」文件夹。

[满意，保存] [继续编辑] [重新生成]
```

#### 快捷操作

**默认显示**：
- [生成笔记] - 快速开始创作
- [学习风格] - 上传参考文章学习新风格
- [管理资产] - 查看和管理所有资产

**动态显示**：
- 根据上下文显示相关操作
- 如：生成中显示 [暂停生成]
- 编辑中显示 [保存修改]

---

### 3.4 风格学习系统

#### 功能描述
通过用户提供的参考文章，自动分析和学习写作风格，保存到风格库。

#### 输入方式
1. 小红书笔记链接（自动爬取，需集成小红书 MCP）
2. 直接粘贴笔记正文

#### 支持篇数
1-N 篇（不限制），用 `---` 分隔符区分

#### 分析维度
- **写作框架**：如：信号列举-干货型、故事讲述-情感型
- **语言风格**：如：轻松活泼、专业严谨
- **结构特征**：段落结构、Emoji 使用习惯
- **表达习惯**：开场白、序数词、提醒词、结尾方式

#### 输出结果
- 实时展示分析进度
- 分析完成后保存到「风格库」
- Agent提示风格已保存，可开始创作

---

### 3.5 重要提醒

**核心原则**：

1. **保持用户风格**：从参考文章中提取用户的独特表达和金句，在生成时自然融入
2. **不编造框架**：框架必须来自参考文章
3. **不输出元信息**：直接输出正文，不要说"根据你的要求"之类的说明
4. **小红书风格**：可以适当使用表情、短段落、口语化表达

**质量控制**：
- 避免概括性描述（如："具备了能力"、"影响力超出范围"）
- 避免刻意杜撰小细节（如："茶杯温热"、"眼里有信任的光"）
- 避免文学化比喻（如："沉甸甸的"、"被肯定的光在房间里亮了一瞬"）
- 避免直接抄袭参考文章的表达（要"同一种手法，不同内容"）

---

### 3.6 工作方法论

#### 工作逻辑

深度提取小红书爆款笔记的写作方法论

#### 四层分析体系

**第一层：为什么能火？（爆款本质）**

**分析目标**：
- 识别爆款笔记的核心价值点
- 理解用户为什么会点赞、收藏、转发
- 提炼出触动用户情绪或需求的关键因素

**分析维度**：
- 提供了什么价值？（实用价值/情绪价值/认知价值）
- 解决了什么痛点？（明确痛点/潜在痛点/创造需求）
- 采用了什么视角？（权威视角/亲历者视角/第三方视角）
- 激发了什么情绪？（认同/共鸣/好奇/紧迫感）

**第二层：写作框架是什么？（结构提取）**

**分析目标**：
- 识别文章的整体结构和逻辑链条
- 提炼可复用的框架模式

**分析维度**：
- **开头手法**：提问/故事/数据/观点/场景/反常识/身份标签
- **主体结构**：有几个要点？段落之间什么关系？（并列/递进/对比）
- **逻辑链条**：论证方式是什么？（举例/对比/归纳/演绎）
- **递进设计**：如何层层深入？（从小到大/从现象到本质/从问题到解决）
- **结尾手法**：总结/呼吁/提问/行动建议/金句收尾

**第三层：怎么写出来的？（方法论提炼）**

**分析目标**：
- 提炼具体的写作技巧和手法
- 总结可复用的表达方式

**分析维度**：
- **语言风格**：
  - 句式特点（短句/长句/问答式）
  - 用词习惯（口语化/专业术语/网络用语）
  - 语气特点（亲切/严肃/幽默/犀利）
- **表达技巧**：
  - 如何让观点更易懂？（举例/类比/数据支撑）
  - 如何让文章更有节奏感？（短段落/表情符号/金句点缀）
  - 如何引导用户情绪？（共情/激励/制造紧迫感）
- **段落衔接**：
  - 用了哪些连接词和过渡句？
  - 如何让逻辑更流畅？
- **表情符号使用**：
  - 使用频率和位置
  - 功能分类（装饰/强调/分隔）

**第四层：如何复用？（应用指南）**

**复用策略**：
1. **框架复用**：
   - 识别框架的核心结构
   - 用新主题填充相同框架
   - 保持逻辑链条，改变具体内容

2. **跨领域应用**：
   - 判断框架的适用范围（某些框架适合多个领域）
   - 识别可替换的元素
   - 保持框架的本质特征

3. **个性化调整**：
   - 结合自己的经验和案例
   - 用自己的语言重新表达
   - 调整细节以适应个人风格

**示例：从职场到学习的框架复用**

原文框架（职场方向）：
> 标题：大厂高绩效的3个秘诀
> 开头：用数据/现象引入
> 主体：
> - 秘诀1：杠杆思维（举例说明）
> - 秘诀2：知识管理（举例说明）
> - 秘诀3：优先级判断（举例说明）
> 结尾：总结观点 + 行动建议

复用后的框架（学习方法方向）：
> 标题：学霸高效学习的3个秘诀
> 开头：用数据/现象引入（调整为学习相关）
> 主体：
> - 秘诀1：杠杆思维（学习中的杠杆：用20%时间掌握80%知识点）
> - 秘诀2：知识管理（学习中的知识管理：笔记系统/复习方法）
> - 秘诀3：优先级判断（学习中的优先级：先攻克重点/难点）
> 结尾：总结观点 + 行动建议（调整为学习相关）

**判断是否可以复用的标准**：
1. 逻辑链条是否适用于新主题？
2. 结构在新领域中是否合理？
3. 是否能找到足够的案例和素材？

---

### 3.7 智能生成系统

#### 功能描述
根据用户输入的 Idea 和学习的风格，自动生成笔记。

#### 自动写作公式

```
用户给 Idea & 个性化信息  +  框架  +  文风  →  完整正文（900-950字）
```

**公式说明**：
- **用户给 Idea & 个性化信息**：主题、目标受众、特殊要求等
- **框架**：从框架库选择的写作结构（8种框架类型）
- **文风**：从风格库提取的用户个人风格特征
- **完整正文**：符合小红书规范的笔记内容（900-950字）

#### 详细工作流程

**Step 1: 理解用户需求**

**必需信息**：
- 用户主题/idea（用户提供）
- 文章思路（可选）

**可选信息**：
- 指定参考文章（用户说"用 XX 的框架"时）
- 其他要求（目标读者、语气、侧重点等）

**Step 2: 确定参考文章**

**场景 A：用户指定参考文章**
- 读取用户指定的参考文章，或者框架，或者文风类型
- 跳到 Step 3

**场景 B：用户未指定（自动匹配）**
1. 分析用户的 idea，判断适合的框架类型
2. 读取分类规则
3. 根据框架类型，在参考文章下搜索对应分类的文章
4. 选择最匹配的 1-2 篇作为参考

**Step 3: 提取框架和文风**

从参考文章中提取：
- **写作框架**：文章结构、逻辑链条、段落功能
- **文风特征**：语气、句式、表达习惯
- **金句/常用表达**：可复用的句子

同时读取：
- `框架库`（框架结构说明）
- `文风库`（用户文风指南）

**Step 4: 生成正文**

**公式**：`idea + 框架 + 文风 → 完整正文`

**写作要求**：
1. 严格按照提取的框架结构展开
2. 使用用户的文风（语气、句式、表达习惯）
3. 自然嵌入用户的金句和常用表达
4. 适配小红书风格：适当使用表情符号、段落清晰、口语化
5. 控制字数：一般不超过 1000 字，最佳范围 900-950 字，如果用户要求调整字数也可以修改
6. 内容完整、逻辑清晰、可读性强
7. 总结并自然嵌入用户的写作风格特点

**避免的 AI 错误**：
- ❌ 概括性描述（"具备了能力"、"影响力超出范围"）
- ❌ 刻意杜撰小细节（"茶杯温热"、"眼里有信任的光"）
- ❌ 文学化比喻（"沉甸甸的"、"被肯定的光在房间里亮了一瞬"）
- ❌ 直接无脑抄袭参考文章的表达和语句（要"同一种手法，不同内容"）

**Step 5: 输出结果**

**正文输出**：先输入文章框架，用户确认没问题后，再进行完整写作

#### 实时展示

**右侧对话框**：
```
Agent: 正在为你生成...
• 应用风格：风格#1
• 选择框架：信号列举-干货型
• 目标字数：900-950字
⏳ 生成中...
```

**中间画布**：
- 自动打开新标签
- 实时显示生成内容
- 类似于步骤4的实时预览

---

### 3.8 内容编辑系统

#### 功能描述
用户可以对生成的内容进行调整和优化。

#### 编辑功能
- **标题选择**：3个推荐标题，点击切换
- **正文编辑**：可编辑textarea
- **标签管理**：添加/删除，最多5个

#### 自动保存
- 编辑中状态自动保存草稿
- 防止意外丢失数据
- 用户点击"保存"后才保存到知识库

---

### 3.7 免费额度系统

#### 功能描述
限制免费用户使用次数，引导付费转化。

#### 规则
- 免费额度：2 次
- 额度用完后提示升级 Pro 版本
- 使用 localStorage 持久化存储

#### 额度说明
- 每次生成笔记消耗1次额度
- 学习风格不消耗额度
- 编辑已生成内容不消耗额度

---

## 4. 用户流程

### 4.1 首次使用流程（学习风格）

```
步骤1：用户打开网站
     ↓
右侧Agent：
"👋 你好！我是 **PopPump**，你的爆款内容工厂！
我先学习一下你的写作风格，这样生产出的笔记会更像你，也更容易爆。

请粘贴1-2篇你满意的小红书笔记作为参考：
[粘贴参考文章到输入框]"
     ↓
步骤2：用户粘贴参考文章
     ↓
Agent：实时展示分析进度
"正在分析你的写作风格...
┌─────────────────────────┐
│ ✓ 提取写作框架          │
│ → 学习语言风格...       │ 50%
│ ○ 识别结构特征          │
│ ○ 总结表达习惯          │
└─────────────────────────┘"
     ↓
Agent：
"✨ 分析完成！已保存为「风格#1」到左侧风格库

我已经记住了你的写作风格：
• 📚 框架：信号列举-干货型
• ✍️ 语气：轻松活泼
• 🏗️ 结构：总分总
• 💬 习惯：常用"和大家分享"开场

内容工厂已准备就绪！现在想生产什么爆款？"
     ↓
步骤3：用户输入创作意图
"写一篇关于远程办公效率的笔记"
     ↓
Agent：开始生成...
```

### 4.2 创作新笔记流程

```
步骤1：用户在右侧输入
"写一篇关于远程办公效率的笔记，目标是刚入职的新人"
     ↓
Agent：
"好的！正在为你生成...
• 应用风格：风格#1
• 选择框架：信号列举-干货型
• 目标受众：刚入职的新人
• 目标字数：900-950字
⏳ 生成中..."
     ↓
步骤2：中间画布自动打开新标签「文章1」
实时显示生成过程和内容预览
     ↓
Agent：
"✅ 笔记已生成！
查看中间画布的「文章1」标签。

我已经为你推荐了3个标题：
1. 远程办公效率翻倍：3个技巧（数字+痛点）
2. 大厂不说的远程效率秘籍（好奇心+权威）
3. 别再低效工作了！（情绪化+紧迫）

你可以：
• 点击选择标题
• 编辑正文内容
• 调整标签

满意后告诉我，我会保存到「生成文章」文件夹。"
     ↓
步骤3：用户在中间画布编辑内容
- 选择标题
- 编辑正文
- 调整标签
     ↓
步骤4：用户在右侧输入
"满意，保存"
     ↓
Agent：
"✅ 已保存到「生成文章」文件夹！
命名为：远程办公效率秘籍

要继续创作下一篇吗？"
```

### 4.3 查看和管理资产流程

```
步骤1：用户点击左侧目录「风格库」→「风格#1」
     ↓
中间画布：打开「风格#1」标签，显示风格详情
     ↓
用户查看风格特征：
- 📚 写作框架：信号列举-干货型
- ✍️ 语言风格：轻松活泼
- 🏗️ 结构特征：总分总
- 💬 表达习惯：常用"和大家分享"开场
     ↓
用户点击「应用此风格」
     ↓
Agent：
"已切换到「风格#1」！
接下来生成的笔记都会应用这个风格。

现在想写什么主题？"
```

### 4.4 多任务工作流程

```
场景：同时编辑文章、查看风格、参考框架

中间画布标签：
- 文章1 [编辑中] ×
- 风格#1 [只读] ×
- 信号列举-干货型 [只读] ×

用户操作：
1. 在「文章1」标签编辑内容
2. 切换到「风格#1」查看风格特征
3. 切换到「信号列举-干货型」参考框架
4. 回到「文章1」继续编辑

所有标签同时打开，随时切换
```

---

## 5. 页面设计

### 5.1 整体布局

**三栏式布局**：
- 左侧目录（250px，可折叠）
- 中间画布（flex: 1）
- 右侧对话框（350px，固定宽度）

**响应式适配**：
- 桌面端：三栏同时显示
- 平板端：左侧和右侧可折叠
- 移动端：单栏，通过底部导航切换

### 5.2 设计风格

**主色调**：小红书红 (#FF2442)

**主题**：浅色清爽风格

**参考**：Notion + Cursor + 小红书官网

**特点**：专业但轻松的AI工具感觉，类似IDE的生产力体验

### 5.3 详细设计

#### 左侧目录（250px）

**顶部**：
- 搜索框：实时过滤所有资产
- 宽度：100%

**文件夹列表**：
- 树形结构
- 图标 + 文件夹名称
- 展开数量提示（如：风格库 3）

**资产列表**：
- 图标 + 资产名称
- 状态指示（默认、使用次数）
- 悬停高亮

**交互**：
- 点击：展开/折叠文件夹
- 点击资产：在中间画布打开标签
- 右键：弹出上下文菜单
- 拖拽：同级资产可排序

#### 中间画布（flex: 1）

**标签栏**：
- 高度：48px
- 背景：var(--bg-secondary)
- 边框：1px solid var(--border-color)

**标签样式**：
- 宽度：自适应，最小120px
- 内边距：12px 16px
- 关闭按钮：× (16px × 16px)
- 状态指示：[编辑中] [只读]

**内容区**：
- 高度：calc(100vh - 48px - 64px)
- 背景：var(--bg-primary)
- 内边距：32px
- 最大宽度：900px（居中）

**不同标签类型的样式**：
- 文章编辑：标题选择 + textarea + 标签管理 + 操作按钮
- 风格详情：卡片式展示风格特征
- 框架说明：卡片式展示框架介绍
- 参考文章：只读展示文章内容

#### 右侧对话框（350px）

**顶部**：
- 标题：🤖 PopPump Agent
- 高度：48px
- 边框：1px solid var(--border-color)

**消息区域**：
- 高度：calc(100vh - 48px - 120px - 64px)
- 滚动：垂直滚动
- 内边距：16px

**消息样式**：
- Agent消息：左侧对齐，白色背景
- User消息：右侧对齐，小红书红背景
- 进度条：宽度100%，动画效果
- 操作按钮：3个一组，横向排列

**输入框区域**：
- 高度：120px
- 边框：1px solid var(--border-color)
- textarea：高度80px，可调整
- 快捷操作按钮：横向排列，最多3个
- 发送按钮：小红书红背景

---

## 6. 技术架构

### 6.1 技术栈
- **前端**：纯 HTML + CSS + JavaScript
- **存储**：localStorage（知识库、免费额度）
- **样式**：CSS 变量 + Flexbox + Grid
- **字体**：系统字体（-apple-system, PingFang SC）

### 6.2 文件结构
```
poppump/
├── index.html          # 主页面（三栏布局）
├── playground.html     # 设计展示（旧版6步流程）
├── css/
│   ├── style.css       # 主样式文件
│   └── components.css  # 组件样式（新增）
├── js/
│   ├── app.js          # 主逻辑
│   ├── agent.js        # Agent交互逻辑（新增）
│   ├── assets.js       # 知识库管理（新增）
│   └── canvas.js       # 画布标签系统（新增）
└── PRD.md              # 产品需求文档（本文档）
```

### 6.3 状态管理

```javascript
// 全局状态
const state = {
    // 知识库
    assets: {
        frameworks: [...],      // 框架库（预定义，只读）
        styles: [...],          // 风格库（用户创建，可管理）
        references: [...],      // 参考文章（用户上传，可管理）
        articles: [...]         // 生成文章（用户创作，可管理）
    },

    // UI状态
    ui: {
        // 左侧目录
        leftPanel: {
            expanded: true,         // 是否展开
            width: 250,             // 宽度
            searchQuery: '',        // 搜索关键词
            selectedFolder: null,   // 选中的文件夹
            selectedAsset: null     // 选中的资产
        },

        // 中间画布
        canvas: {
            tabs: [],               // 打开的标签页
            activeTabId: null,      // 当前活跃标签
            maxTabs: 10             // 最大标签数
        },

        // 右侧对话框
        agentPanel: {
            width: 350,             // 固定宽度
            messages: [],           // 对话历史
            currentStyleId: null,   // 当前使用的风格
            isGenerating: false     // 是否正在生成
        }
    },

    // 免费额度
    freeTier: {
        remaining: 2,              // 剩余次数
        total: 2                   // 总次数
    }
};
```

### 6.4 数据结构

**框架库**：
```javascript
{
    id: 'fw_001',
    name: '信号列举-干货型',
    icon: '📚',
    description: '适合分享实用技巧和方法论',
    structure: '开场 + 3-5个要点 + 总结建议',
    examples: ['示例文章1', '示例文章2'],
    readonly: true
}
```

**风格库**：
```javascript
{
    id: 'style_001',
    name: '风格#1',
    icon: '🎨',
    description: '轻松活泼型',
    framework: '信号列举-干货型',
    tone: '轻松活泼',
    voice: '第一人称"我"',
    structure: '总分总结构',
    emoji: '适当使用Emoji',
    habits: [
        '常用"和大家分享"作为开场白',
        '喜欢用"第一个"、"第二个"等序数词'
    ],
    createdAt: '2026-02-08',
    isDefault: true,
    referenceCount: 3
}
```

**参考文章**：
```javascript
{
    id: 'ref_001',
    name: '职场效率文章1',
    icon: '📝',
    content: '文章内容...',
    source: '小红书笔记',
    uploadedAt: '2026-02-08',
    usedCount: 3,
    tags: ['职场', '效率']
}
```

**生成文章**：
```javascript
{
    id: 'art_001',
    name: '远程办公效率秘籍',
    icon: '✏️',
    titles: [
        { text: '远程办公效率翻倍：3个技巧', selected: false },
        { text: '大厂不说的远程效率秘籍', selected: true },
        { text: '别再低效工作了！', selected: false }
    ],
    content: '正文内容...',
    tags: ['#效率提升', '#职场经验'],
    styleId: 'style_001',
    frameworkId: 'fw_001',
    createdAt: '2026-02-08',
    modifiedAt: '2026-02-08',
    status: 'editing' // editing, saved, published
}
```

**标签页**：
```javascript
{
    id: 'tab_001',
    type: 'article', // article, style, framework, reference
    assetId: 'art_001',
    title: '远程办公效率秘籍',
    status: 'editing', // editing, readonly
    modified: false,
    active: true
}
```

**Agent消息**：
```javascript
{
    id: 'msg_001',
    role: 'agent', // agent, user
    type: 'text', // text, progress, buttons
    content: '你好！我是你的小红书笔记创作助手...',
    timestamp: '2026-02-08 10:00:00',
    actions: [] // 附加的交互按钮
}
```

### 6.5 后续集成

**小红书 MCP**：https://github.com/xpzo0uying/xiaohongshu-mcp
- 用途：爬取小红书笔记内容
- 集成点：用户粘贴链接后自动调用

**AI 生成**：待定
- 用途：实际生成笔记内容
- 集成点：Agent生成逻辑

---

## 7. 数据流

### 7.1 风格学习数据流
```
用户粘贴参考文章
    ↓
Agent识别意图（学习风格）
    ↓
实时展示分析进度
    ├─ 提取写作框架
    ├─ 学习语言风格
    ├─ 识别结构特征
    └─ 总结表达习惯
    ↓
保存到「风格库」
    ↓
Agent提示风格已保存，可开始创作
```

### 7.2 笔记生成数据流
```
用户输入创作意图
    ↓
Agent理解意图
    ↓
检查风格库
    ├─ 有风格 → 选择默认风格
    └─ 无风格 → 引导学习风格
    ↓
自动选择框架（或用户手动选择）
    ↓
开始生成（实时展示进度）
    ├─ 中间画布打开新标签
    └─ 实时显示生成内容
    ↓
生成完成
    ↓
用户编辑（可选）
    ├─ 选择标题
    ├─ 编辑正文
    └─ 调整标签
    ↓
用户确认保存
    ↓
保存到「生成文章」
```

### 7.3 资产查看数据流
```
用户点击左侧目录资产
    ↓
检查画布标签
    ├─ 已打开 → 切换到该标签
    └─ 未打开 → 创建新标签
    ↓
根据资产类型加载内容
    ├─ 文章 → 加载编辑器
    ├─ 风格 → 加载详情卡片
    ├─ 框架 → 加载说明卡片
    └─ 参考文章 → 加载内容展示
    ↓
展示到中间画布
```

---

## 8. 非功能性需求

### 8.1 性能要求
- 页面加载时间 < 2秒
- 交互响应时间 < 200ms
- 动画流畅（60fps）
- 知识库支持1000+资产

### 8.2 兼容性
- 浏览器：Chrome, Safari, Firefox, Edge（最新版）
- 设备：桌面端优先，响应式适配移动端

### 8.3 易用性
- 新用户无需培训即可上手
- Agent有清晰引导
- 支持键盘快捷键（如：Ctrl+Enter发送）

### 8.4 可靠性
- 自动保存机制（防丢失）
- 数据持久化（localStorage）
- 错误提示和恢复

---

## 9. MVP 范围

### 9.1 MVP 包含（v2.0）

**核心功能**：
- ✅ 三栏式布局（左侧目录、中间画布、右侧对话框）
- ✅ 知识库管理（框架库、风格库、参考文章、生成文章）
- ✅ 多标签画布系统
- ✅ Agent对话式交互
- ✅ 风格学习（模拟）
- ✅ 笔记生成（模拟）
- ✅ 内容编辑
- ✅ 免费额度管理

**交互功能**：
- ✅ 左侧目录：展开/折叠、点击打开、右键菜单
- ✅ 中间画布：标签切换、关闭、状态指示
- ✅ 右侧对话框：消息滚动、输入框、快捷操作
- ✅ 实时进度展示

### 9.2 MVP 不包含（后续版本）

**短期（1-2周）**：
- 真实的 AI 生成（集成 LLM API）
- 小红书 MCP 集成（自动爬取）
- 资产拖拽排序
- 资产搜索过滤

**中期（1-2个月）**：
- 用户登录/注册系统
- 云端数据同步
- 资产分享功能
- 数据统计和分析

**长期（3-6个月）**：
- 付费订阅功能（Pro 版本）
- 多平台支持（抖音、微博等）
- 团队协作功能
- API 开放平台

---

## 10. 成功指标

### 10.1 MVP 验证指标
- Agent对话完成率：从学习风格到生成笔记的完成率 > 60%
- 知识库使用率：用户查看/管理资产的比例 > 40%
- 用户满意度：使用后愿意推荐的意愿 > 70%
- 复用率：用户再次创作比例 > 40%

### 10.2 业务指标（后续）
- DAU：日活跃用户数
- 资产创建数：风格库、生成文章数量
- 付费转化率：免费用户转付费用户比例
- ARPU：每用户平均收入

---

## 11. 风险和挑战

### 11.1 技术风险
- **多标签性能**：同时打开多个标签可能影响性能
  - 缓解：限制最大标签数（10个），惰性加载内容
- **数据持久化**：localStorage 有容量限制（5MB）
  - 缓解：使用 IndexedDB 存储大文件，清理过期数据
- **Agent理解准确性**：可能误解用户意图
  - 缓解：提供确认步骤，用户可手动调整

### 11.2 产品风险
- **用户接受度**：从工具到 Agent 的转变需要适应
  - 缓解：提供引导教程，快速响应式交互
- **知识库复杂度**：可能过于复杂
  - 缓解：渐进式披露，新用户只显示必要功能

### 11.3 业务风险
- **小红书政策风险**：可能被小红书限制
  - 缓解：仅作为创作辅助工具，不涉及违规操作

---

## 12. 附录

### 12.1 参考资料
- 小红书创作指南：https://creator.xiaohongshu.com
- 小红书 MCP：https://github.com/xpzo0uying/xiaohongshu-mcp
- write-xiaohongshu skill：本地已有写作工具
- 交互设计原则：渐进式披露、Agent UI模式、对话式设计

### 12.2 设计稿
- Design Playground：`playground.html`（旧版6步流程）
- UI 组件展示：[playground.html](playground.html)

### 12.3 关键术语
- **PopPump**：爆款文章的内容工厂，源源不断地生产爆款笔记
- **Agent（智能体）**：主动理解、自主完成的AI助手
- **知识库（Knowledge Base）**：框架库、风格库、参考文章、生成文章的总称
- **画布（Canvas）**：多标签页区域，用于查看和编辑资产
- **风格（Style）**：从参考文章中提取的写作特征集合
- **框架（Framework）**：笔记的写作结构和模式

---

**🎉 文档结束**
